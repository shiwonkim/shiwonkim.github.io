---
layout: default
title: Bio
navbar_title: Bio
---

<div class="row justify-content-center">
  <!-- LEFT: Profile -->
  <div class="col-12 col-xl-3">
    <div style="position: sticky; top: 80px;">
      {% include widgets/profile_card.html %}
    </div>
  </div>

  <!-- RIGHT: Timeline -->
  <div class="col-12 col-xl-7">

    <div class="bio-main">

      <!-- Header + Filter -->
      <div class="d-flex flex-wrap justify-content-between align-items-end gap-2 mb-3">
        <div>
          <h2 class="mb-1">Timeline</h2>
          <p class="text-muted mb-0" style="max-width: 46rem;">
            Education and experience in one chronological view.
          </p>
        </div>

        <div class="d-flex flex-wrap align-items-center gap-2">
          <div class="text-muted small" id="tl-counts"></div>
          <div class="btn-group" role="group" aria-label="Timeline filters">
            <button type="button" class="btn btn-sm btn-outline-dark is-active" data-filter="all">All</button>
            <button type="button" class="btn btn-sm btn-outline-dark" data-filter="education">Education</button>
            <button type="button" class="btn btn-sm btn-outline-dark" data-filter="experience">Experience</button>
          </div>
        </div>
      </div>

      <!-- Timeline (center spine, two-sided cards) -->
      <div class="timeline timeline--center">

        {% assign items = site.data.bio_timeline | sort: "date_start" | reverse %}
        {% for item in items %}
          <article class="tl-item"
                   data-type="{{ item.type }}"
                   data-default-side="{% if item.type == 'education' %}left{% else %}right{% endif %}">
            <div class="tl-center" aria-hidden="true">
              <div class="tl-dot"></div>
            </div>

            <div class="tl-card card shadow-sm">
              <div class="card-body">
                <div class="d-flex flex-wrap justify-content-between align-items-start gap-2">
                  <div class="me-2">
                    <div class="tl-kicker text-muted">
                      <span class="badge rounded-pill tl-badge tl-badge-{{ item.type }}">
                        {% if item.type == "education" %}Education{% else %}Experience{% endif %}
                      </span>

                      <span class="ms-2">
                        {% if item.date_end and item.date_end != "" %}
                          {{ item.date_start }} – {{ item.date_end }}
                        {% else %}
                          {{ item.date_start }} – Present
                        {% endif %}
                      </span>

                      {% if item.location %}
                        <span class="ms-2 d-none d-md-inline">· {{ item.location }}</span>
                      {% endif %}
                    </div>

                    <h5 class="card-title mb-1">{{ item.title }}</h5>
                    <div class="text-muted"><strong>{{ item.org }}</strong></div>
                  </div>

                  {% if item.tags and item.tags.size > 0 %}
                    <div class="tl-tags">
                      {% for t in item.tags %}
                        <span class="badge bg-light text-dark border">{{ t }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>

                {% if item.bullets and item.bullets.size > 0 %}
                  <ul class="mt-3 mb-0">
                    {% for b in item.bullets %}
                      <li>{{ b }}</li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </div>
            </div>
          </article>
        {% endfor %}
      </div>

    </div>
  </div>
</div>

<style>
  .bio-main { padding-bottom: 2rem; }

  /* ---------- Center timeline layout ---------- */
  .timeline--center {
    position: relative;
    padding: 0.25rem 0;
  }

  /* center spine */
  .timeline--center::before {
    content: "";
    position: absolute;
    left: 50%;
    top: 0.25rem;
    bottom: 0.25rem;
    width: 2px;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.12);
  }

  /* item as 3-col grid: left | center | right */
  .tl-item {
    display: grid;
    grid-template-columns: minmax(0, 1fr) 2.25rem minmax(0, 1fr);
    gap: 0.75rem;
    align-items: start;
    padding: 0.75rem 0;
  }

  /* dot in center column */
  .tl-center {
    grid-column: 2;
    position: relative;
    display: flex;
    justify-content: center;
  }
  .tl-dot {
    width: 0.9rem;
    height: 0.9rem;
    border-radius: 999px;
    border: 2px solid rgba(0,0,0,0.45);
    background: #fff;
    margin-top: 0.55rem;
  }

  /* card base */
  .tl-card {
    border-radius: 14px;
    border: 1px solid rgba(0,0,0,0.08);
  }

  /* side placement (assigned by JS) */
  .tl-item[data-side="left"] .tl-card {
    grid-column: 1;
    justify-self: end;
  }
  .tl-item[data-side="right"] .tl-card {
    grid-column: 3;
    justify-self: start;
  }

  /* subtle arrow pointers toward spine */
  .tl-item[data-side="left"] .tl-card::before,
  .tl-item[data-side="right"] .tl-card::before {
    content: "";
    position: absolute;
    top: 1.1rem;
    width: 10px;
    height: 10px;
    background: #fff;
    border-top: 1px solid rgba(0,0,0,0.08);
    border-right: 1px solid rgba(0,0,0,0.08);
    transform: rotate(45deg);
  }
  .tl-item[data-side="left"] .tl-card { position: relative; }
  .tl-item[data-side="left"] .tl-card::before {
    right: -6px;
  }
  .tl-item[data-side="right"] .tl-card { position: relative; }
  .tl-item[data-side="right"] .tl-card::before {
    left: -6px;
    transform: rotate(225deg);
  }

  /* badges */
  .tl-kicker { font-size: 0.92rem; }
  .tl-badge {
    font-weight: 600;
    border: 1px solid rgba(0,0,0,0.12);
    background: #fff;
    color: #111;
  }

  /* tags */
  .tl-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
    justify-content: flex-end;
  }

  /* filter state */
  .btn.is-active {
    background: #111;
    color: #fff;
    border-color: #111;
  }
  .tl-hidden { display: none !important; }

  /* ---------- Mobile: fall back to single column ---------- */
  @media (max-width: 768px) {
    .timeline--center::before {
      left: 0.8rem;
      transform: none;
    }
    .tl-item {
      grid-template-columns: 1.6rem minmax(0, 1fr);
      gap: 0.75rem;
    }
    .tl-center { grid-column: 1; justify-content: flex-start; }
    .tl-dot { margin-top: 0.7rem; }

    .tl-item .tl-card {
      grid-column: 2 !important;
      justify-self: stretch !important;
    }

    /* pointers on mobile */
    .tl-item .tl-card::before {
      left: -6px !important;
      right: auto !important;
      transform: rotate(225deg) !important;
    }
  }
</style>

<script>
(function () {
  const root = document.querySelector('.bio-main');
  if (!root) return;

  const items = Array.from(root.querySelectorAll('.tl-item'));
  const buttons = Array.from(root.querySelectorAll('[data-filter]'));
  const countsEl = root.querySelector('#tl-counts');

  // --- 1) Default side assignment by type ---
  items.forEach(el => {
    el.setAttribute('data-side', el.getAttribute('data-default-side') || 'right');
  });

  // --- 2) Mixed balancing: keep newest items on their "semantic" side,
  //         but if one side is much longer, flip some of the OLDEST majority items.
  function balanceSides() {
    // only consider visible items? -> balancing should be stable for "all"
    const all = items;

    let left = all.filter(el => el.getAttribute('data-side') === 'left');
    let right = all.filter(el => el.getAttribute('data-side') === 'right');

    // if difference is small, do nothing
    const diff = Math.abs(left.length - right.length);
    const THRESHOLD = 3; // tweakable
    if (diff < THRESHOLD) return;

    // decide majority side
    const majoritySide = left.length > right.length ? 'left' : 'right';
    const minoritySide = majoritySide === 'left' ? 'right' : 'left';

    // we flip some of the oldest items on the majority side
    // items are in DOM order: newest -> oldest (because sorted reverse in Liquid)
    const majorityItems = all.filter(el => el.getAttribute('data-side') === majoritySide);

    // How many to flip to reduce imbalance near 1
    // Example: L=14, R=6 diff=8 -> need flip 4 to make L=10 R=10
    const needFlip = Math.floor(diff / 2);

    // pick from bottom (oldest) of majority list
    const candidates = majorityItems.slice(-needFlip);

    // flip them, but alternate flips a bit so they don't cluster visually
    // (still flipping only from the bottom keeps newest stable)
    candidates.forEach((el, i) => {
      el.setAttribute('data-side', minoritySide);
      // optional: mark that it's balanced (could style if you want)
      el.setAttribute('data-balanced', 'true');
    });
  }

  // --- 3) Counts display ---
  function updateCounts() {
    const edu = items.filter(el => el.getAttribute('data-type') === 'education').length;
    const exp = items.filter(el => el.getAttribute('data-type') === 'experience').length;
    if (countsEl) countsEl.textContent = `Education (${edu}) · Experience (${exp})`;
  }

  // --- 4) Filter logic ---
  function setActive(btn) {
    buttons.forEach(b => b.classList.remove('is-active'));
    btn.classList.add('is-active');
  }

  function applyFilter(filter) {
    items.forEach(el => {
      const type = el.getAttribute('data-type');
      const show = (filter === 'all' || type === filter);
      el.classList.toggle('tl-hidden', !show);
    });
  }

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const filter = btn.getAttribute('data-filter');
      setActive(btn);
      applyFilter(filter);
    });
  });

  // run once
  updateCounts();
  balanceSides();
  applyFilter('all');
})();
</script>
